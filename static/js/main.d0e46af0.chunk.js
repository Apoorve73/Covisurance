(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){},41:function(e,t,a){e.exports=a(84)},47:function(e,t,a){},49:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"db",function(){return v}),a.d(n,"db1",function(){return g}),a.d(n,"auth",function(){return b}),a.d(n,"facebookProvider",function(){return w});var r={};a.r(r),a.d(r,"doCreateUserWithEmailAndPassword",function(){return S}),a.d(r,"doSignInWithEmailAndPassword",function(){return y}),a.d(r,"doSignOut",function(){return O}),a.d(r,"doPasswordReset",function(){return j}),a.d(r,"doPasswordChange",function(){return C}),a.d(r,"doFacebookSignIn",function(){return P});var o={};a.r(o),a.d(o,"doCreateUser",function(){return U}),a.d(o,"onceGetUsers",function(){return N}),a.d(o,"doGetAnUnser",function(){return A});a(22);var l=a(1),c=a.n(l),s=a(17),i=a.n(s),u=(a(47),a(88)),m=a(87),d=a(3),p=(a(49),"/home"),h=a(86),f=a(19),E=a.n(f);a(55),a(56),a(58);E.a.apps.length||E.a.initializeApp({apiKey:"AIzaSyDlWBJxDBtvNwnxpTlCF4fNJmzdObGoV-E",authDomain:"covisurance.firebaseapp.com",databaseURL:"https://covisurance-default-rtdb.firebaseio.com",projectId:"covisurance",storageBucket:"covisurance.appspot.com",messagingSenderId:"899802696676",appId:"1:899802696676:web:fb8e0f4223c064d22cd5f1",measurementId:"G-VMSK2QW51H"});var g=E.a.firestore(),v=E.a.database(),b=E.a.auth(),w=new E.a.auth.FacebookAuthProvider,S=function(e,t){return b.createUserWithEmailAndPassword(e,t)},y=function(e,t){return b.signInWithEmailAndPassword(e,t)},O=function(){return b.signOut()},j=function(e){return b.sendPasswordResetEmail(e)},C=function(e){return b.currentUser.updatePassword(e)},P=function(){return b.signInWithPopup(w)},U=function(e,t,a){return v.ref("users/".concat(e)).set({username:t,email:a})},N=function(){return v.ref("users").once("value")},A=function(e){return v.ref("users/".concat(e)).once("value")},x=function(){return c.a.createElement(d.b,{color:"info",onClick:r.doSignOut},"Sign Out")},k=c.a.createContext(null),I=function(){return c.a.createElement(d.k,{color:"light",dark:!0,expand:"md"},c.a.createElement(d.l,null,c.a.createElement(h.a,{to:"/Covisurance"}," COVISURANCE ")),c.a.createElement(d.h,{className:"ml-auto",navbar:!0},c.a.createElement(d.i,null,c.a.createElement(d.j,null,c.a.createElement(h.a,{to:"/signin",className:"btn btn-primary"},"Sign In")))))},X=function(){return c.a.createElement(k.Consumer,null,function(e){return e?c.a.createElement(D,{userInfo:e}):c.a.createElement(I,null)})},D=function(e){var t=e.userInfo;return c.a.createElement(d.k,{color:"light",light:!0,expand:"md"},c.a.createElement(d.l,null,c.a.createElement(h.a,{to:"/Covisurance"}," COVISURANCE ")),c.a.createElement(d.h,{className:"ml-auto",navbar:!0},c.a.createElement(d.i,null,c.a.createElement(d.j,null,c.a.createElement(h.a,{to:p,className:"btn btn-primary"},"Home"))),"facebook.com"===t.providerData[0].providerId?null:c.a.createElement(d.i,null,c.a.createElement(d.j,null,c.a.createElement(h.a,{to:"/account",className:"btn btn-primary"},"Account"))),c.a.createElement(d.i,null,c.a.createElement(x,null))))},R=function(e){var t=e.history;return c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h1",{className:"display-4"},"COVISURANCE"),c.a.createElement("p",{className:"lead"},"Your personal COVID Insurance"),c.a.createElement("hr",{className:"my-4"}),c.a.createElement("p",null,"Fill in your details and get instant insurance in your wallet."),c.a.createElement("p",{className:"lead"},c.a.createElement(d.b,{color:"info",onClick:function(){t.push("/signin")}},"Get Started")))},L=a(12),T=a(6),W=a(7),F=a(9),B=a(8),G=a(10),M=a(11),V=a(89),q={username:"",email:"",passwordOne:"",passwordTwo:"",error:null,showingAlert:!1},J=function(e,t){return function(){return Object(M.a)({},e,t)}},z=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(l)))).state=Object(L.a)({},q),a.onSubmit=function(e){var t=a.state,n=t.username,l=t.email,c=t.passwordOne,s=a.props.history;r.doCreateUserWithEmailAndPassword(l,c).then(function(e){o.doCreateUser(e.user.uid,n,l).then(function(){a.setState(Object(L.a)({},q)),s.push(p)}).catch(function(e){a.setState(J("error",e)),a.timer()})}).catch(function(e){a.setState(J("error",e)),a.timer()}),e.preventDefault()},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.email,r=t.passwordOne,o=t.passwordTwo,l=t.error,s=t.showingAlert,i=r!==o||""===r||""===n||""===a;return c.a.createElement("div",null,s&&c.a.createElement(d.a,{color:"danger",onLoad:this.timer},l.message),c.a.createElement(d.d,{onSubmit:this.onSubmit},c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"userName"},"Full Name"),c.a.createElement(d.f,{type:"username",name:"username",id:"userName",placeholder:"John Doe",value:a,onChange:function(t){return e.setState(J("username",t.target.value))}})),c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"exampleEmail"},"Email"),c.a.createElement(d.f,{type:"email",name:"email",id:"exampleEmail",placeholder:"user@gmail.com",value:n,onChange:function(t){return e.setState(J("email",t.target.value))}})),c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"examplePassword1"},"Password"),c.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword1",placeholder:"Password",value:r,onChange:function(t){return e.setState(J("passwordOne",t.target.value))}})),c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"examplePassword2"},"Confirm Password"),c.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword2",placeholder:"Confirm Password",value:o,onChange:function(t){return e.setState(J("passwordTwo",t.target.value))}})),c.a.createElement("div",{className:"text-center"},c.a.createElement(d.b,{disabled:i,type:"submit"},"Sign Up"))))}}]),t}(l.Component),H=function(){return c.a.createElement("p",null,"Don't have an account? ",c.a.createElement(h.a,{to:"/signup"},"Sign Up"))},K=Object(V.a)(function(e){var t=e.history;return c.a.createElement("div",null,c.a.createElement("div",{className:"div-flex"},c.a.createElement("div",null,c.a.createElement("h1",{className:"centered"},"Sign Up"),c.a.createElement(z,{history:t}))))}),Q=a(39),Y=function(e,t){return function(){return Object(M.a)({},e,t)}},$={email:"",error:null,showingAlert:!1},Z=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(o)))).state=Object(L.a)({},$),a.onSubmit=function(e){var t=a.state.email;r.doPasswordReset(t).then(function(){a.setState(Object(L.a)({},$))}).catch(function(e){a.setState(Y("error",e)),a.timer()}),e.preventDefault()},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.error,r=t.showingAlert,o=""===a;return c.a.createElement("div",null,r&&c.a.createElement(d.a,{color:"danger",onLoad:this.timer},n.message),c.a.createElement(d.d,{onSubmit:this.onSubmit},c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"exampleEmail"},"Email"),c.a.createElement(d.f,{type:"email",name:"email",id:"exampleEmail",placeholder:"user@gmail.com",value:a,onChange:function(t){return e.setState(Y("email",t.target.value))}})),c.a.createElement("div",{className:"text-center"},c.a.createElement(d.b,{disabled:o,type:"submit"},"Reset My Password"))))}}]),t}(l.Component),_=function(){return c.a.createElement("p",null,c.a.createElement(h.a,{to:"/pw-forget"},"Forgot Password?"))},ee=function(){return c.a.createElement("div",{className:"div-flex"},c.a.createElement("div",null,c.a.createElement("h1",{className:"centered"},"Forget Password"),c.a.createElement(Z,null)))},te=function(e,t){return function(){return Object(M.a)({},e,t)}},ae={email:"",password:"",error:null,showingAlert:!1},ne=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(l)))).state=Object(L.a)({},ae),a.onSubmit=function(e){var t=a.state,n=t.email,o=t.password,l=a.props.history;r.doSignInWithEmailAndPassword(n,o).then(function(){a.setState(Object(L.a)({},ae)),l.push(p)}).catch(function(e){a.setState(te("error",e)),a.timer()}),e.preventDefault()},a.facebookLogin=function(){var e=a.props.history;r.doFacebookSignIn().then(function(t){console.log("authUser",t),o.doCreateUser(t.user.uid,t.user.displayName,t.user.email).then(function(){e.push(p)}).catch(function(e){a.setState(te("error",e))})}).catch(function(e){a.setState(te("error",e))})},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,r=t.error,o=t.showingAlert,l=""===n||""===a;return c.a.createElement("div",null,o&&c.a.createElement(d.a,{color:"danger",onLoad:this.timer},r.message),c.a.createElement(d.d,{onSubmit:this.onSubmit},c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"exampleEmail"},"Email"),c.a.createElement(d.f,{type:"email",name:"email",id:"exampleEmail",placeholder:"user@gmail.com",value:a,onChange:function(t){return e.setState(te("email",t.target.value))}})),c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"examplePassword"},"Password"),c.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword",placeholder:"pass-test",value:n,onChange:function(t){return e.setState(te("password",t.target.value))}})),c.a.createElement("div",{className:"text-center"},c.a.createElement(d.b,{disabled:l,type:"submit"},"Sign In"))),c.a.createElement("hr",null),c.a.createElement(Q.FacebookLoginButton,{onClick:this.facebookLogin}))}}]),t}(l.Component),re=Object(V.a)(function(e){var t=e.history;return c.a.createElement("div",{className:"div-flex"},c.a.createElement("div",null,c.a.createElement("h1",{className:"centered"},"Sign In"),c.a.createElement(ne,{history:t}),c.a.createElement(H,null),c.a.createElement(_,null)))}),oe=function(e){return function(t){var a=function(a){function r(){return Object(T.a)(this,r),Object(F.a)(this,Object(B.a)(r).apply(this,arguments))}return Object(G.a)(r,a),Object(W.a)(r,[{key:"componentDidMount",value:function(){var t=this;n.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"render",value:function(){var e=this;return c.a.createElement(k.Consumer,null,function(a){return a?c.a.createElement(t,Object.assign({},e.props,{loggedUser:a})):null})}}]),r}(c.a.Component);return Object(V.a)(a)}},le=a(40),ce=a.n(le),se=a(28),ie=a.n(se),ue=function(e,t){return function(){return Object(M.a)({},e,t)}},me=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={users:null,username:"",aadhar:0,phone:0,nominee:"",nomineephone:0,relation:"",loading:!0,avatar:"",isUploading:!1,progress:0,avatarURL:""},a.handleUploadStart=function(){return a.setState({isUploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1}),console.error(e)},a.handleUploadSuccess=function(e){a.setState({avatar:e,progress:100,isUploading:!1}),ie.a.storage().ref("documents").child(e).getDownloadURL().then(function(e){return a.setState({avatarURL:e})})},a.onSubmit=function(e,t){var n=a.state,r=n.aadhar,o=n.phone,l=n.nominee,c=n.nomineephone,s=n.relation,i=n.avatar;e.preventDefault(),a.setState({loading:!0}),g.collection("insurance").add({aadhar:r,phone:o,nominee:l,nomineephone:c,relation:s,avatar:i}).then(function(){window.location.assign("https://www.google.com"),a.setState({loading:!1})}).catch(function(e){alert("error.message"),a.setState({loading:!1})})},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.loggedUser;o.doGetAnUnser(t.uid).then(function(t){e.setState({username:t.val().username,loading:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.loading,r=t.aadhar,o=t.phone,l=t.nominee,s=t.nomineephone,i=t.relation;return c.a.createElement("div",null,c.a.createElement("h1",{className:"display-h1"},"Personal Details"),!n&&c.a.createElement("p",{className:"centered"},"Hello ",a,"! Kindly fill out this form to continue."),c.a.createElement("form",{onSubmit:this.onSubmit},c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Aadhar Number"),c.a.createElement("input",{type:"number",class:"form-control",name:"aadhar",placeholder:"XXXX-XXXX-XXXX",value:r,onChange:function(t){return e.setState(ue("aadhar",t.target.value))},required:!0})),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Phone Number"),c.a.createElement("input",{type:"number",class:"form-control",name:"phone",placeholder:"9411XXXXXX",value:o,onChange:function(t){return e.setState(ue("phone",t.target.value))},required:!0})),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Nominee's Name"),c.a.createElement("input",{type:"text",class:"form-control",name:"nominee",placeholder:"Nominee",value:l,onChange:function(t){return e.setState(ue("nominee",t.target.value))},required:!0})),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Nominee's Phone Number"),c.a.createElement("input",{type:"number",class:"form-control",name:"nomineephone",placeholder:"8708XXXXXX",value:s,onChange:function(t){return e.setState(ue("nomineephone",t.target.value))},required:!0})),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Relationship"),c.a.createElement("input",{type:"text",class:"form-control",name:"relation",placeholder:"Son/Daughter/Wife/Son-in-Law etc.",value:i,onChange:function(t){return e.setState(ue("relation",t.target.value))},required:!0})),c.a.createElement("div",null,c.a.createElement("p",{className:"lead"},"*Upload Certificate of specified relationship with Nominee"),c.a.createElement("label",null,"Image Preview:"),this.state.isUploading&&c.a.createElement("p",null,"Progress: ",this.state.progress),this.state.avatarURL&&c.a.createElement("img",{src:this.state.avatarURL,alt:"file"}),c.a.createElement("div",{style:{marginTop:20,marginBottom:20}},c.a.createElement(ce.a,{accept:"documents/*",name:"avatar",randomizeFilename:!0,storageRef:ie.a.storage().ref("documents"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit",class:"btn btn-success"},"Submit"))))}}]),t}(l.Component),de=oe(function(e){return!!e})(me),pe=function(e,t){return function(){return Object(M.a)({},e,t)}},he={passwordOne:"",passwordTwo:"",error:null,showingAlert:!1},fe=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(o)))).state=Object(L.a)({},he),a.onSubmit=function(e){var t=a.state.passwordOne;r.doPasswordUpdate(t).then(function(){a.setState(Object(L.a)({},he))}).catch(function(e){a.setState(pe("error",e)),a.timer()}),e.preventDefault()},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.passwordOne,n=t.passwordTwo,r=t.error,o=t.showingAlert,l=a!==n||""===a;return c.a.createElement("div",{style:{marginTop:"40px"}},o&&c.a.createElement(d.a,{color:"danger",onLoad:this.timer},r.message),c.a.createElement(d.d,{onSubmit:this.onSubmit},c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"examplePassword1"},"New Password"),c.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword1",placeholder:"New Password",value:a,onChange:function(t){return e.setState(pe("passwordOne",t.target.value))}})),c.a.createElement(d.e,null,c.a.createElement(d.g,{for:"examplePassword2"},"Confirm Password"),c.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword2",placeholder:"Confirm Password",value:n,onChange:function(t){return e.setState(pe("passwordTwo",t.target.value))}})),c.a.createElement("div",{className:"text-center"},c.a.createElement(d.b,{disabled:l,type:"submit"},"Change My Password"))))}}]),t}(l.Component),Ee=oe(function(e){return!!e&&"facebook.com"!==e.providerData[0].providerId})(function(){return c.a.createElement(k.Consumer,null,function(e){return c.a.createElement("div",{className:"div-flex"},c.a.createElement("div",null,c.a.createElement("h5",{className:"centered"},"Change/Reset Password for : ",e.email),"facebook.com"===e.providerData[0].providerId?null:c.a.createElement("div",null,c.a.createElement(Z,null),c.a.createElement(fe,null))))})}),ge=function(e){return function(t){function a(){var e,t;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(F.a)(this,(e=Object(B.a)(a)).call.apply(e,[this].concat(r)))).state={authUser:null},t}return Object(G.a)(a,t),Object(W.a)(a,[{key:"componentDidMount",value:function(){var e=this;n.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"render",value:function(){var t=this.state.authUser;return console.log("withAuthentication file authUser",t),c.a.createElement(k.Provider,{value:t},c.a.createElement(e,this.props))}}]),a}(c.a.Component)}(function(){return c.a.createElement(u.a,null,c.a.createElement(d.c,null,c.a.createElement(X,null),c.a.createElement(m.a,{exact:!0,path:"/Covisurance",component:R}),c.a.createElement(m.a,{exact:!0,path:"/signup",component:K}),c.a.createElement(m.a,{exact:!0,path:"/signin",component:re}),c.a.createElement(m.a,{exact:!0,path:"/pw-forget",component:ee}),c.a.createElement(m.a,{exact:!0,path:p,component:de}),c.a.createElement(m.a,{exact:!0,path:"/account",component:Ee})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.d0e46af0.chunk.js.map