(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){},41:function(e,t,a){e.exports=a(84)},47:function(e,t,a){},49:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"db",function(){return v}),a.d(n,"db1",function(){return g}),a.d(n,"auth",function(){return b}),a.d(n,"facebookProvider",function(){return w});var r={};a.r(r),a.d(r,"doCreateUserWithEmailAndPassword",function(){return S}),a.d(r,"doSignInWithEmailAndPassword",function(){return y}),a.d(r,"doSignOut",function(){return O}),a.d(r,"doPasswordReset",function(){return j}),a.d(r,"doPasswordChange",function(){return C}),a.d(r,"doFacebookSignIn",function(){return P});var o={};a.r(o),a.d(o,"doCreateUser",function(){return N}),a.d(o,"onceGetUsers",function(){return U}),a.d(o,"doGetAnUnser",function(){return A});a(22);var l=a(1),s=a.n(l),c=a(17),i=a.n(c),u=(a(47),a(88)),m=a(87),d=a(3),p=(a(49),"/home"),h=a(86),f=a(19),E=a.n(f);a(55),a(56),a(58);E.a.apps.length||E.a.initializeApp({apiKey:"AIzaSyDlWBJxDBtvNwnxpTlCF4fNJmzdObGoV-E",authDomain:"covisurance.firebaseapp.com",databaseURL:"https://covisurance-default-rtdb.firebaseio.com",projectId:"covisurance",storageBucket:"covisurance.appspot.com",messagingSenderId:"899802696676",appId:"1:899802696676:web:fb8e0f4223c064d22cd5f1",measurementId:"G-VMSK2QW51H"});var g=E.a.firestore(),v=E.a.database(),b=E.a.auth(),w=new E.a.auth.FacebookAuthProvider,S=function(e,t){return b.createUserWithEmailAndPassword(e,t)},y=function(e,t){return b.signInWithEmailAndPassword(e,t)},O=function(){return b.signOut()},j=function(e){return b.sendPasswordResetEmail(e)},C=function(e){return b.currentUser.updatePassword(e)},P=function(){return b.signInWithPopup(w)},N=function(e,t,a){return v.ref("users/".concat(e)).set({username:t,email:a})},U=function(){return v.ref("users").once("value")},A=function(e){return v.ref("users/".concat(e)).once("value")},x=function(){return s.a.createElement("div",{style:{marginTop:10}},s.a.createElement(d.b,{className:"btn btn-danger",onClick:r.doSignOut},"Sign Out"))},k=s.a.createContext(null),I=function(e){e.history;return s.a.createElement(d.k,{color:"light",dark:!0,expand:"md"},s.a.createElement(d.l,null,s.a.createElement(h.a,{to:"/Covisurance",className:"btn btn-secondary"},"COVISURANCE")),s.a.createElement(d.h,{className:"ml-auto",navbar:!0},s.a.createElement(d.i,null,s.a.createElement(d.j,null,s.a.createElement(h.a,{to:"/signin",className:"btn btn-primary"},"Sign In/ Register")))))},X=function(){return s.a.createElement(k.Consumer,null,function(e){return e?s.a.createElement(D,{userInfo:e}):s.a.createElement(I,null)})},D=function(e){var t=e.userInfo;e.history;return s.a.createElement(d.k,{color:"light",light:!0,expand:"md"},s.a.createElement(d.l,null,s.a.createElement(h.a,{to:"/Covisurance",className:"btn btn-secondary"},"COVISURANCE")),s.a.createElement(d.h,{className:"ml-auto",navbar:!0},s.a.createElement(d.i,null,s.a.createElement(d.j,null,s.a.createElement(h.a,{to:p,className:"btn btn-primary"},"Home"))),"facebook.com"===t.providerData[0].providerId?null:s.a.createElement(d.i,null,s.a.createElement(d.j,null,s.a.createElement(h.a,{to:"/account",className:"btn btn-secondary"},"Account"))),s.a.createElement(d.i,null,s.a.createElement(x,null))))},R=function(e){var t=e.history;return s.a.createElement("div",{className:"jumbotron"},s.a.createElement("h1",{className:"display-4"},"COVISURANCE"),s.a.createElement("p",{className:"lead"},"Your personal COVID Insurance"),s.a.createElement("hr",{className:"my-4"}),s.a.createElement("p",null,"Fill in your details and get instant insurance in your wallet."),s.a.createElement("p",{className:"lead"},s.a.createElement(d.b,{color:"info",onClick:function(){t.push("/signin")}},"Get Started")))},L=a(12),T=a(6),W=a(7),F=a(9),B=a(8),G=a(10),M=a(11),V=a(89),q={username:"",email:"",passwordOne:"",passwordTwo:"",error:null,showingAlert:!1},J=function(e,t){return function(){return Object(M.a)({},e,t)}},z=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(l)))).state=Object(L.a)({},q),a.onSubmit=function(e){var t=a.state,n=t.username,l=t.email,s=t.passwordOne,c=a.props.history;r.doCreateUserWithEmailAndPassword(l,s).then(function(e){o.doCreateUser(e.user.uid,n,l).then(function(){a.setState(Object(L.a)({},q)),c.push(p)}).catch(function(e){a.setState(J("error",e)),a.timer()})}).catch(function(e){a.setState(J("error",e)),a.timer()}),e.preventDefault()},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.email,r=t.passwordOne,o=t.passwordTwo,l=t.error,c=t.showingAlert,i=r!==o||""===r||""===n||""===a;return s.a.createElement("div",null,c&&s.a.createElement(d.a,{color:"danger",onLoad:this.timer},l.message),s.a.createElement(d.d,{onSubmit:this.onSubmit},s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"userName"},"Full Name"),s.a.createElement(d.f,{type:"username",name:"username",id:"userName",placeholder:"John Doe",value:a,onChange:function(t){return e.setState(J("username",t.target.value))}})),s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"exampleEmail"},"Email"),s.a.createElement(d.f,{type:"email",name:"email",id:"exampleEmail",placeholder:"user@gmail.com",value:n,onChange:function(t){return e.setState(J("email",t.target.value))}})),s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"examplePassword1"},"Password"),s.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword1",placeholder:"Password",value:r,onChange:function(t){return e.setState(J("passwordOne",t.target.value))}})),s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"examplePassword2"},"Confirm Password"),s.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword2",placeholder:"Confirm Password",value:o,onChange:function(t){return e.setState(J("passwordTwo",t.target.value))}})),s.a.createElement("div",{className:"text-center"},s.a.createElement(d.b,{disabled:i,type:"submit"},"Sign Up"))))}}]),t}(l.Component),H=function(){return s.a.createElement("p",null,"Don't have an account? ",s.a.createElement(h.a,{to:"/signup"},"Sign Up"))},K=Object(V.a)(function(e){var t=e.history;return s.a.createElement("div",null,s.a.createElement("div",{className:"div-flex"},s.a.createElement("div",null,s.a.createElement("h1",{className:"centered"},"Sign Up"),s.a.createElement(z,{history:t}))))}),Q=a(39),Y=function(e,t){return function(){return Object(M.a)({},e,t)}},$={email:"",error:null,showingAlert:!1},Z=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(o)))).state=Object(L.a)({},$),a.onSubmit=function(e){var t=a.state.email;r.doPasswordReset(t).then(function(){a.setState(Object(L.a)({},$))}).catch(function(e){a.setState(Y("error",e)),a.timer()}),e.preventDefault()},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.error,r=t.showingAlert,o=""===a;return s.a.createElement("div",null,r&&s.a.createElement(d.a,{color:"danger",onLoad:this.timer},n.message),s.a.createElement(d.d,{onSubmit:this.onSubmit},s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"exampleEmail"},"Email"),s.a.createElement(d.f,{type:"email",name:"email",id:"exampleEmail",placeholder:"user@gmail.com",value:a,onChange:function(t){return e.setState(Y("email",t.target.value))}})),s.a.createElement("div",{className:"text-center"},s.a.createElement(d.b,{disabled:o,type:"submit"},"Reset My Password"))))}}]),t}(l.Component),_=function(){return s.a.createElement("p",null,s.a.createElement(h.a,{to:"/pw-forget"},"Forgot Password?"))},ee=function(){return s.a.createElement("div",{className:"div-flex"},s.a.createElement("div",null,s.a.createElement("h1",{className:"centered"},"Forget Password"),s.a.createElement(Z,null)))},te=function(e,t){return function(){return Object(M.a)({},e,t)}},ae={email:"",password:"",error:null,showingAlert:!1},ne=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(l)))).state=Object(L.a)({},ae),a.onSubmit=function(e){var t=a.state,n=t.email,o=t.password,l=a.props.history;r.doSignInWithEmailAndPassword(n,o).then(function(){a.setState(Object(L.a)({},ae)),l.push(p)}).catch(function(e){a.setState(te("error",e)),a.timer()}),e.preventDefault()},a.facebookLogin=function(){var e=a.props.history;r.doFacebookSignIn().then(function(t){console.log("authUser",t),o.doCreateUser(t.user.uid,t.user.displayName,t.user.email).then(function(){e.push(p)}).catch(function(e){a.setState(te("error",e))})}).catch(function(e){a.setState(te("error",e))})},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,r=t.error,o=t.showingAlert,l=""===n||""===a;return s.a.createElement("div",null,o&&s.a.createElement(d.a,{color:"danger",onLoad:this.timer},r.message),s.a.createElement(d.d,{onSubmit:this.onSubmit},s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"exampleEmail"},"Email"),s.a.createElement(d.f,{type:"email",name:"email",id:"exampleEmail",placeholder:"user@gmail.com",value:a,onChange:function(t){return e.setState(te("email",t.target.value))}})),s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"examplePassword"},"Password"),s.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword",placeholder:"pass-test",value:n,onChange:function(t){return e.setState(te("password",t.target.value))}})),s.a.createElement("div",{className:"text-center"},s.a.createElement(d.b,{disabled:l,type:"submit"},"Sign In"))),s.a.createElement("hr",null),s.a.createElement(Q.FacebookLoginButton,{onClick:this.facebookLogin}))}}]),t}(l.Component),re=Object(V.a)(function(e){var t=e.history;return s.a.createElement("div",{className:"div-flex"},s.a.createElement("div",null,s.a.createElement("h1",{className:"centered"},"Sign In"),s.a.createElement(ne,{history:t}),s.a.createElement(H,null),s.a.createElement(_,null)))}),oe=function(e){return function(t){var a=function(a){function r(){return Object(T.a)(this,r),Object(F.a)(this,Object(B.a)(r).apply(this,arguments))}return Object(G.a)(r,a),Object(W.a)(r,[{key:"componentDidMount",value:function(){var t=this;n.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"render",value:function(){var e=this;return s.a.createElement(k.Consumer,null,function(a){return a?s.a.createElement(t,Object.assign({},e.props,{loggedUser:a})):null})}}]),r}(s.a.Component);return Object(V.a)(a)}},le=a(40),se=a.n(le),ce=a(28),ie=a.n(ce),ue=function(e,t){return function(){return Object(M.a)({},e,t)}},me=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={users:null,username:"",email:"",aadhar:0,phone:0,nominee:"",nomineephone:0,relation:"",loading:!0,avatar:"",isUploading:!1,progress:0,avatarURL:""},a.handleUploadStart=function(){return a.setState({isUploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1}),console.error(e)},a.handleUploadSuccess=function(e){a.setState({avatar:e,progress:100,isUploading:!1}),ie.a.storage().ref("documents").child(e).getDownloadURL().then(function(e){return a.setState({avatarURL:e})})},a.onSubmit=function(e,t){var n=a.state,r=n.aadhar,o=n.phone,l=n.nominee,s=n.nomineephone,c=n.relation,i=n.avatar;e.preventDefault(),a.setState({loading:!0}),g.collection("insurance").add({aadhar:r,phone:o,nominee:l,nomineephone:s,relation:c,avatar:i}).then(function(){window.location.assign("https://gurleen3.github.io/Covisurance/"),a.setState({loading:!1})}).catch(function(e){alert("error.message"),a.setState({loading:!1})})},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.loggedUser;o.doGetAnUnser(t.uid).then(function(t){e.setState({username:t.val().username,email:t.val().email,loading:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.loading,r=t.aadhar,o=t.phone,l=t.nominee,c=t.nomineephone,i=t.relation;return s.a.createElement("div",null,s.a.createElement("h1",{className:"display-h1"},"Personal Details"),!n&&s.a.createElement("p",{className:"centered"},"Hello ",a,"! Kindly fill out this form to continue."),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"Aadhar Number"),s.a.createElement("input",{type:"number",class:"form-control",name:"aadhar",placeholder:"XXXX-XXXX-XXXX",value:r,onChange:function(t){return e.setState(ue("aadhar",t.target.value))},required:!0})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"Phone Number"),s.a.createElement("input",{type:"number",class:"form-control",name:"phone",placeholder:"9411XXXXXX",value:o,onChange:function(t){return e.setState(ue("phone",t.target.value))},required:!0})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"Nominee's Name"),s.a.createElement("input",{type:"text",class:"form-control",name:"nominee",placeholder:"Nominee",value:l,onChange:function(t){return e.setState(ue("nominee",t.target.value))},required:!0})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"Nominee's Phone Number"),s.a.createElement("input",{type:"number",class:"form-control",name:"nomineephone",placeholder:"8708XXXXXX",value:c,onChange:function(t){return e.setState(ue("nomineephone",t.target.value))},required:!0})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"Relationship"),s.a.createElement("input",{type:"text",class:"form-control",name:"relation",placeholder:"Son/Daughter/Wife/Son-in-Law etc.",value:i,onChange:function(t){return e.setState(ue("relation",t.target.value))},required:!0})),s.a.createElement("div",null,s.a.createElement("p",{className:"lead"},"*Upload Certificate of specified relationship with Nominee"),s.a.createElement("label",null,"Image Preview:"),this.state.isUploading&&s.a.createElement("p",null,"Progress: ",this.state.progress),this.state.avatarURL&&s.a.createElement("img",{src:this.state.avatarURL,alt:"file"}),s.a.createElement("div",{style:{marginTop:20,marginBottom:20}},s.a.createElement(se.a,{accept:"documents/*",name:"avatar",randomizeFilename:!0,storageRef:ie.a.storage().ref("documents"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}))),s.a.createElement("div",null,s.a.createElement("button",{type:"submit",class:"btn btn-success"},"Submit"))))}}]),t}(l.Component),de=oe(function(e){return!!e})(me),pe=function(e,t){return function(){return Object(M.a)({},e,t)}},he={passwordOne:"",passwordTwo:"",error:null,showingAlert:!1},fe=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(F.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(o)))).state=Object(L.a)({},he),a.onSubmit=function(e){var t=a.state.passwordOne;r.doPasswordUpdate(t).then(function(){a.setState(Object(L.a)({},he))}).catch(function(e){a.setState(pe("error",e)),a.timer()}),e.preventDefault()},a.timer=function(){a.setState({showingAlert:!0}),setTimeout(function(){a.setState({showingAlert:!1})},4e3)},a}return Object(G.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.passwordOne,n=t.passwordTwo,r=t.error,o=t.showingAlert,l=a!==n||""===a;return s.a.createElement("div",{style:{marginTop:"40px"}},o&&s.a.createElement(d.a,{color:"danger",onLoad:this.timer},r.message),s.a.createElement(d.d,{onSubmit:this.onSubmit},s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"examplePassword1"},"New Password"),s.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword1",placeholder:"New Password",value:a,onChange:function(t){return e.setState(pe("passwordOne",t.target.value))}})),s.a.createElement(d.e,null,s.a.createElement(d.g,{for:"examplePassword2"},"Confirm Password"),s.a.createElement(d.f,{type:"password",name:"password",id:"examplePassword2",placeholder:"Confirm Password",value:n,onChange:function(t){return e.setState(pe("passwordTwo",t.target.value))}})),s.a.createElement("div",{className:"text-center"},s.a.createElement(d.b,{disabled:l,type:"submit"},"Change My Password"))))}}]),t}(l.Component),Ee=oe(function(e){return!!e&&"facebook.com"!==e.providerData[0].providerId})(function(){return s.a.createElement(k.Consumer,null,function(e){return s.a.createElement("div",{className:"div-flex"},s.a.createElement("div",null,s.a.createElement("h5",{className:"centered"},"Change/Reset Password for : ",e.email),"facebook.com"===e.providerData[0].providerId?null:s.a.createElement("div",null,s.a.createElement(Z,null),s.a.createElement(fe,null))))})}),ge=function(e){return function(t){function a(){var e,t;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(F.a)(this,(e=Object(B.a)(a)).call.apply(e,[this].concat(r)))).state={authUser:null},t}return Object(G.a)(a,t),Object(W.a)(a,[{key:"componentDidMount",value:function(){var e=this;n.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"render",value:function(){var t=this.state.authUser;return console.log("withAuthentication file authUser",t),s.a.createElement(k.Provider,{value:t},s.a.createElement(e,this.props))}}]),a}(s.a.Component)}(function(){return s.a.createElement(u.a,null,s.a.createElement(d.c,null,s.a.createElement(X,null),s.a.createElement(m.a,{exact:!0,path:"/Covisurance",component:R}),s.a.createElement(m.a,{exact:!0,path:"/signup",component:K}),s.a.createElement(m.a,{exact:!0,path:"/signin",component:re}),s.a.createElement(m.a,{exact:!0,path:"/pw-forget",component:ee}),s.a.createElement(m.a,{exact:!0,path:p,component:de}),s.a.createElement(m.a,{exact:!0,path:"/account",component:Ee})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.6614bf75.chunk.js.map